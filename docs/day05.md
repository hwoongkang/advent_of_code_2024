# Day 05

https://adventofcode.com/2024/day/4

위상 정렬 문제입니다.

파트 1은 위상 정렬을 직접적으론 안 써도 되고,

파트 2는 위상 정렬을 응용해야 합니다.

## Part 1

위상 정렬에 어긋났는지만 판단하면 돼서, 전체를 정렬까진 할 필요는 없습니다.

각 페이지 번호에 대해 먼저 출력되면 안 되는 번호들을 저장한 뒤 그것만 조회하면 O(n)에 풀 수 있습니다.

## Part 2

이번엔 틀린 순서에 대해 정정을 해야 합니다.
가운데 번호만 더해야 하는데 정답이 있는 걸 생각하면 각 쿼리를 어떻게 짰는지가 궁금해지지만 너무 어려워서 3초 고민하고 포기했습니다.

테스트에는 사이클이 없어서 run 돌렸다가 stack overflow 뜨고 깨달았는데, 실제 데이터에는 사이클이 존재해서 전체 위상 정렬을 때릴 수가 없습니다.

어떻게 보면 사이클이 존재하는데도 각 쿼리를 줬다는 건, 각 쿼리에 들어가는 페이지만 뽑아냈을 때의 sub-graph에는 사이클이 존재하지 않는다는 뜻이므로 각 쿼리 별로 위상정렬을 따로 해주면 합니다.

전체 그래프 크기를 V, E라 했을 때, 쿼리의 길이를 l이라 하더라도 필터링 과정에서 전체 그래프를 보긴해야하므로 위상 정렬 시간은 O(V+E) 정도입니다.

아무튼 각 쿼리에 대해 한번씩만 위상 정렬 해주면, 쿼리의 개수를 q라 할 때 O(q\*(V+E)) 정도 걸립니다.
